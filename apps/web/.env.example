# ==================================================================================================
# File:        ./apps/web/.env
# Author:      BO$ Kacper
# Created:     2025-12-11
# Updated:     2026-02-05
# Version:     1.0.0
# Mode:        dev
# Description: Environment variables for the hss web service
# License:     AGPL-3.0-only
# Notes:
#   - This file is intended for LOCAL DEVELOPMENT.
#   - Do NOT use weak secrets in production!!!                                               <<< [!]
# ==================================================================================================
NODE_ENV="development"                                             # development | production | test
DEBUG_BFF="1"                                          # Enable BFF debug logs (1 = true, 0 = false)
# ===[APP URLS]=====================================================================================
NEXT_PUBLIC_APP_URL="https://hss.local"
HSS_API_BASE_URL="https://api.hss.local"
HSS_WEB_ORIGIN="https://hss.local"

# ===[AUTH.JS | CORE]===============================================================================
AUTH_SECRET="CHANGE_ME_GENERATE_A_NEW_AUTH_SECRET"                                         # <<< [!]
AUTH_URL="https://hss.local"
AUTH_TRUST_HOST=true

# ===[KEYCLOAK | OIDC PROVIDER]=====================================================================
AUTH_KEYCLOAK_ID="hss-web"
AUTH_KEYCLOAK_ISSUER="https://auth.hss.local/realms/hss"
AUTH_KEYCLOAK_SECRET="CHANGE_ME_USE_KEYCLOAK_HSS_WEB_CLIENT_SECRET"                        # <<< [!]
NEXT_PUBLIC_KEYCLOAK_ISSUER="https://auth.hss.local/realms/hss"
NEXT_PUBLIC_KEYCLOAK_CLIENT_ID="hss-web"

# ===[REDIS | SESSION STORE]========================================================================
HSS_REDIS_URL="redis://nextbff:nextbffsecret@localhost:6379"
HSS_REDIS_CONNECT_TIMEOUT_MS=2000
HSS_REDIS_COMMAND_TIMEOUT_MS=3000

# ===[RATE LIMIT | WEB API ROUTES]==================================================================
HSS_RATE_LIMIT_BFF_WINDOW_MS=60000
HSS_RATE_LIMIT_BFF_MAX=300
HSS_RATE_LIMIT_SESSION_TOUCH_WINDOW_MS=60000
HSS_RATE_LIMIT_SESSION_TOUCH_MAX=120
HSS_RATE_LIMIT_LOGOUT_WINDOW_MS=60000
HSS_RATE_LIMIT_LOGOUT_MAX=30
HSS_RATE_LIMIT_NEXTAUTH_WINDOW_MS=60000
HSS_RATE_LIMIT_NEXTAUTH_MAX=180

# ===[BFF | OPAQUE SESSION]=========================================================================
HSS_SESSION_COOKIE_NAME="__Host-hss.sid"
HSS_SESSION_KEY_PREFIX="hss:sess:"
HSS_SESSION_IDLE_TIMEOUT_SECONDS=900
HSS_SESSION_ABSOLUTE_TIMEOUT_SECONDS=28800
HSS_SESSION_TOUCH_THROTTLE_SECONDS=60
HSS_SESSION_MAX_EXTENSION_SECONDS=7200
HSS_SESSION_REFRESH_LOCK_TTL_MS=10000
HSS_SESSION_ENCRYPTION_KEY="CHANGE_ME_GENERATE_A_64_CHAR_SESSION_ENCRYPTION_KEY"           # <<< [!]

# ===[SESSION UX]===================================================================================
NEXT_PUBLIC_SESSION_TIMEOUT_SECONDS=900
NEXT_PUBLIC_SESSION_PROMPT_BEFORE_EXPIRY_SECONDS=300
NEXT_PUBLIC_SESSION_EXTEND_OPTIONS_MINUTES=10,20,30
NEXT_PUBLIC_SESSION_AUTH_CHECK_INTERVAL_SECONDS=60

# ===[EOF @file: apps/web/.env]=====================================================================
